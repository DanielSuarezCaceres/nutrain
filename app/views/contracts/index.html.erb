<div class="d-flex justify-content-start" id="upper-toolbar">
  <div class="p-2">
    <%= link_to 'New contract', new_user_contract_path(user_id: current_user.id), class: 'btn' %>
  </div>
  <div class="p-2">
    <%= link_to 'Delete all', user_contracts_path(current_user.id), class: 'btn btn-danger' %>
  </div>
</div>

<table class="table table-responsive-lg table-hover">
  <tr>
    <th class="text-center">Client</th>
    <th class="text-center">Status</th>
    <th class="text-center">Start date</th>
    <th class="text-center">Actions</th>
  </tr>
  <tbody>
  <% @contracts.each do |contract| %><tr>
    <td class="text-center"><%= User.find(contract.client_id).name %></td>
    <td class="text-center"><%= contract.state %></td>
    <td class="text-center"><%= contract.state == 'Active' ? contract.updated_at : '' %></td>
    <td class="text-center">
      <%= link_to 'Details', user_contract_path(user_id: current_user.id, id: contract.id), class: 'btn' %>
      <%= link_to 'Delete', user_contract_path(user_id: current_user.id, id: contract.id), method: :delete,
        data: { confirm: "You are deleting the following contract: 
                -Client: #{User.find(contract.client_id).fullname}
                -Professional: #{User.find(contract.professional_id).fullname}
                -Status: #{contract.state}
                This action cannot be undone. Are you sure you want to delete?" }, class: 'btn btn-danger' %>
      <%= link_to 'Edit', edit_user_contract_path(user_id: current_user.id, id: contract.id), class: 'btn' %>
    </td>
  </tr>
  <% end %>
  </tbody>
</table>